{% extends 'layout.html' %}
{% block content %}

      <div class="newsview">
        <div class="news_author">
            <a class="time">{{content.addTime|date('d-M,Y',-1*60-15)}}&nbsp;</a>
            <a class="author"><strong>&nbsp;@{{content.user.username}}&nbsp;</strong></a>
            <a href="/?category={{category}}">&nbsp;#{{content.category.name}}</a>
        </div>
        <h1 class="news_title">{{content.title}}</h1>
        <div class="news_about"><strong>DESCRIPTION</strong>&nbsp;{{content.description}}</div>
        <div class="news_infos">
          <div id="test-editormd-view">
              <textarea style="display:none;" name="test-editormd-markdown-doc">{{content.content}}</textarea>               
          </div>
            <script src="https://cdn.bootcss.com/jquery/2.2.3/jquery.min.js"></script>
            <script src="../../public/editor.md-master/lib/marked.min.js"></script>
            <script src="../../public/editor.md-master/lib/prettify.min.js"></script>
            <script src="../../public/editor.md-master/lib/raphael.min.js"></script>
            <script src="../../public/editor.md-master/lib/underscore.min.js"></script>
            <script src="../../public/editor.md-master/lib/sequence-diagram.min.js"></script>
            <script src="../../public/editor.md-master/lib/flowchart.min.js"></script>
            <script src="../../public/editor.md-master/lib/jquery.flowchart.min.js"></script>
            <script src="../../public/editor.md-master/editormd.js"></script>
            <script type="text/javascript">
                testEditormdView2 = editormd.markdownToHTML("test-editormd-view", {
                    htmlDecode      : "style,script,iframe",  // you can filter tags decode
                    emoji           : true,
                    taskList        : true,
                    tex             : true,  // 默认不解析
                    flowChart       : true,  // 默认不解析
                    sequenceDiagram : true,  // 默认不解析
                    codeFold        : true,
                    tocm            : true,         // Using [TOCM]
                });
            </script>
  
      </div>
      {% if prevcontent || nextcontent %}
      <div class="nextinfo">
        <ul class="x-top clearfix">
            {% if prevcontent %}
                <div class="fy fl zhs"><span class="jg35">PREVIOUS:</span></div>
            {% else %}
                <div class="fy fl zhs"><span class="jg35">&nbsp;</span></div>
            {% endif %}{% if nextcontent %}
                <div class="fy fr txtRight zhs"><span class="jg352">NEXT:</span></div>
            {% else %}
                <div class="fy fr txtRight zhs"><span class="jg352">&nbsp;</span></div>
            {% endif %}{% if prevcontent %}
                <div class="fy fl"><a class="previous" href="/view?contentid={{prevcontent.id}}" title="{{prevcontent.title}}">&larr;&nbsp;{{prevcontent.title}}</a></div>
            {% else %}
                <div class="fy fl"><a class="previous" href="/" title="">&nbsp;</a></div>
            {% endif %}{% if nextcontent %}
                <div class="fy fr txtRight"><a class="next" href="/view?contentid={{nextcontent.id}}" title="{{nextcontent.title}}">{{nextcontent.title}}  &nbsp;&rarr;</a></div> 
            {% else %}    
                <div class="fy fr txtRight"><a class="next" href="/" title="">&nbsp;</a></div> 
            {% endif %}
        </ul>
      </div>
      {% endif %}
      <div class="nextinfo">
          <h2>Comments</h2>
          <div class="gbko"> 
          {% if userInfo._id %}
              <div class="line">
              <form name="commentform" id="commentform">    
                <textarea id="messageContent" class="input_text"></textarea></div>
                <input type="hidden" id="contentId" value="{{content.id}}"/>
                <button id="messageBtn" class="Btn">Submit</button>
               </form>
               </div>
          {% else %}    
               <div class="line"><a>Please login.</a></div>
          {% endif %}
               <div id="comments" class="comment">
                    <a class="time">Jun 3,2018&nbsp;</a><a class="author">@Author</a>
                    <p>Content</p>
                </div>
            </div>
        </div>
      </div>
   </div>
<script src="../public/js/comment.js"></script>
{% endblock %}


{% block cloud %}
  <div class="cloud">
      <h2 class="hometitle">Categories</h2>
      <ul>
          {% for cate in categories %}
          {% if category==cate.id %}
            <a href="/?category={{cate.id}}"><b>{{cate.name}}</b></a>
          {% else %}
            <a href="/?category={{cate.id}}">{{cate.name}}</a>
          {% endif %}
          {% endfor %}
      </ul>
  </div>
  <div class="paihang">
        <h2 class="hometitle">Related Posts</h2>
        <ul>
         {% for cont in contents %}
            {% if cont==content.id %}
            <li><b><a href="/view?contentid={{cont.id}}" title="{{cont.title}}">{{cont.title}}</a></b></li>
            {% else %}
            <li><a href="/view?contentid={{cont.id}}" title="{{cont.title}}">{{cont.title}}</a></li>
              <!-- <p>{{content.description}}</p> -->
            {% endif %}
         {% endfor %}
        </ul>
    </div>
    
    
{% endblock %}